<div class="row-fluid">
  <div class="span6">
    <div>
      <strong>Title</strong>: <input type="text" ng-model="explorationTitle" ng-model-onblur>
      <br>
      <strong>Category</strong>: <input type="text" ng-model="explorationCategory" ng-model-onblur>
    </div>
  
    <div>
      <strong>Cover image</strong> (for the <a href="/gallery">Gallery</a>):
  
      <span ui-if="explorationImageId">
        <img class="oppia-small-image" ng-src="/imagehandler/<[explorationImageId]>">
        <button type="button" class="btn" ng-click="deleteExplorationImage()"
                title="Delete this image">
          <i class="icon-trash"></i>
        </button>
      </span>
      <div ui-if="!explorationImageId">
        <em>No image supplied.</em>

        <button type="button" ng-click="openAddExplorationImageForm()"
                ng-hide="activeInputData.name == 'explorationMetadata.addNewImage'">
          Add Image
        </button>

        <div ng-show="activeInputData.name == 'explorationMetadata.addNewImage'">
          <form id="newImageForm">
            <input type="file" id="newImage" name="newImage" image-upload="true">
            <br><br>
            <button type="button" ng-click="saveExplorationImage()">
              Save
            </button>
            <button type="button" ng-click="closeAddExplorationImageForm()">
              Cancel
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <div class="span6">
    <div ng-show="explorationEditors">
      <strong>Collaborator List</strong>
      <span ng-show="currentUser == explorationEditors[0]">
        <button type="button" ng-click="openAddNewEditorForm()"
                ng-hide="activeInputData.name == 'explorationMetadata.addNewEditor'">
          Add New
        </button>
      </span>
  
      <ul>
        <li ng-repeat="editor in explorationEditors">
          <span ng-show="$index == 0">
            <em><[editor]></em>
          </span>
          <span ng-hide="$index == 0">
            <[editor]>
          </span>
        </li>
      </ul>
  
      <div ng-show="currentUser == explorationEditors[0]">  
        <form ng-show="activeInputData.name == 'explorationMetadata.addNewEditor'"
              ng-submit="addNewEditor(newEditorEmail)">
          <input type="text" ng-model="newEditorEmail"
                 placeholder="New editor's email address">
          <input type="submit" value="Add Editor">
          <button type="button" ng-click="closeAddNewEditorForm()"
            ng-show="activeInputData.name == 'explorationMetadata.addNewEditor'">
            Cancel
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<br>
<div ng-show="stats.numVisits > 0">
  <bar-chart chart-data="chartData" chart-title="Completion Rate" chart-colors="chartColors" width=500 height=100 chart-area-width=300></bar-chart>
  <br><br>

  <table>
    <tr>
      <th class="oppia-stats-table">State name</th>
      <th class="oppia-stats-table">Times hit</th>
      <th class="oppia-stats-table">Rules</th>
    </tr>

    <tr ng-repeat="(state, stateData) in stats.stateStats | orderBy:'count':true">
      <td class="oppia-stats-table">
        <a href="/create/<[explorationId]>#/gui/<[state]>">
          <[stateData.name]>
        </a>
      </td>
      <td class="oppia-stats-table">
        <[stateData.count]>
      </td>
      <td class="oppia-stats-table">
          <table ng-show="stateData.count > 0">
            <tr ng-repeat="(rule, ruleData) in stateData.rule_stats | orderBy:'count':true">
               <td valign="top" width="200"><[rule]></td>
               <td valign="top" width="100">
                 <bar-chart chart-colors="ruleChartColors" chart-data="ruleData.chartData" width=100 height=30 show-legend="false"></bar-chart></td>
               <td>
                 <ul>
                   <li ng-repeat="answer in ruleData.answers"> <[answer[0]]> <i>(<[answer[1]]> time<div ng-show="<[answer[1]]> > 1">s</div>)</i></li>
                 </ul>
               </td>
            </tr>
            <tr>
               <td valign="top" width="200">No answer given 
                  <img class="oppia-help" src="/images/help.png" 
                    ui-jq="tooltip" ng-hide="isPublic" 
                    title="The student navigated away from the page 
                           without entering an answer." />
               </td>
               <td valign="top" width="100"><bar-chart width=100 height=30 show-legend="false" chart-colors="ruleChartColors" chart-data="stateData.no_answer_chartdata"></bar-chart></td>
               <td></td>
            </tr>
          </table>
      </td>
    </tr>
  </table>
</div>

<div ng-hide="stats.numVisits > 0">
  <em>
    This exploration has not been viewed by readers yet, so there are no
    statistics to display.
  </em>
</div>
